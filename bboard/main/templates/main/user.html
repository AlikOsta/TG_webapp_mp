{% extends "layout/basic.html" %}
{% load static %}
{% block link %}
    <link rel="stylesheet" type="text/css" href="{% static 'main/CSS/index.css' %}">
{% endblock %}

{% block content %}

<div>
    <h1>Привет, {{ user.username }}!</h1>
    <p>Фото
        {% if user.image %}
            <img src="{{ user.image.url }}" style="max-width: 200px; max-height: 200px; border: 1px solid #ddd; border-radius: 50%;">
        {% else %}
            <p>No image available</p>
            <img class="img_card" src="{% static 'main/no_photo_user.png' %}" alt="Placeholder image">
        {% endif %}
    </p>
    <p>Имя в Telegram: {{ user.tg_name }}</p>
    <p>Telegram ID: {{ user.telegram_id }}</p>
</div>


<a href="{% url 'user_change' %}">
<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 72 72">
<path d="M38.406 22.234l11.36 11.36L28.784 54.576l-12.876 4.307c-1.725.577-3.367-1.065-2.791-2.79l4.307-12.876L38.406 22.234zM41.234 19.406l5.234-5.234c1.562-1.562 4.095-1.562 5.657 0l5.703 5.703c1.562 1.562 1.562 4.095 0 5.657l-5.234 5.234L41.234 19.406z"></path>
</svg>
</a>

    <hr>

{% if page_obj %}
    <h1>Мои объявления ({{ len_bb }})</h1>
    <div class="wr_content">
        <div id="bb-container" class="wr_card">
            {% for bb in page_obj %}
                <a class="link_card" href="{% url 'detail' rubric_pk=bb.rubric.pk pk=bb.pk %}">
                    <div class="card">
                        {% if bb.additional_images.exists %}
                            <div class="image-gallery">
                                <img class="img_card" src="{{ bb.additional_images.first.image.url }}" alt="First additional image">
                            </div>
                        {% else %}
                            <img class="img_card" src="{% static 'main/no_photo_bb.png' %}" alt="Placeholder image">
                        {% endif %}
                        <div>
                            <p class="title_card">{{ bb.title }}</p>
                            <p class="content_card">{{ bb.content }}</p>
                            <p class="pra_card">{{ bb.price }} {{ bb.currency }}</p>
                            <p class="date_card">{{ bb.city }} {{ bb.published|date:"d.m.Y" }}</p>
                            <form action="{% url 'profile_bb_delete' pk=bb.pk %}" method="post" style="display:inline;" onsubmit="return confirmDelete(this);">
                                {% csrf_token %}
                                <button type="submit" style="background: none; border: none; cursor: pointer;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 50 50" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M 21 2 C 19.354545 2 18 3.3545455 18 5 L 18 7 L 8 7 A 1.0001 1.0001 0 1 0 8 9 L 9 9 L 9 45 C 9 46.654 10.346 48 12 48 L 38 48 C 39.654 48 41 46.654 41 45 L 41 9 L 42 9 A 1.0001 1.0001 0 1 0 42 7 L 32 7 L 32 5 C 32 3.3545455 30.645455 2 29 2 L 21 2 z M 21 4 L 29 4 C 29.554545 4 30 4.4454545 30 5 L 30 7 L 20 7 L 20 5 C 20 4.4454545 20.445455 4 21 4 z M 19 14 C 19.552 14 20 14.448 20 15 L 20 40 C 20 40.553 19.552 41 19 41 C 18.448 41 18 40.553 18 40 L 18 15 C 18 14.448 18.448 14 19 14 z M 25 14 C 25.552 14 26 14.448 26 15 L 26 40 C 26 40.553 25.552 41 25 41 C 24.448 41 24 40.553 24 40 L 24 15 C 24 14.448 24.448 14 25 14 z M 31 14 C 31.553 14 32 14.448 32 15 L 32 40 C 32 40.553 31.553 41 31 41 C 30.447 41 30 40.553 30 40 L 30 15 C 30 14.448 30.447 14 31 14 z"></path>
                                    </svg>
                                </button>
                            </form>
                            <form action="{% url 'profile_bb_change' pk=bb.pk %}" method="post" style="display:inline;" onsubmit="return confirmDelete(this);">
                                {% csrf_token %}
                                <button type="submit" style="background: none; border: none; cursor: pointer;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 72 72" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M38.406 22.234l11.36 11.36L28.784 54.576l-12.876 4.307c-1.725.577-3.367-1.065-2.791-2.79l4.307-12.876L38.406 22.234zM41.234 19.406l5.234-5.234c1.562-1.562 4.095-1.562 5.657 0l5.703 5.703c1.562 1.562 1.562 4.095 0 5.657l-5.234 5.234L41.234 19.406z"></path>
                                    </svg>
                                </button>
                            </form>

                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>
{% else %}
    <h1>У вас еще нет объявлений</h1>
    <a href="{% url 'add' %}">
    <p><input type="submit" value="Разместить объявления"></p>
    </a>
{%  endif %}


{% endblock %}